{"ast":null,"code":"var _excluded = [\"background\", \"border\", \"columns\", \"data\", \"disabled\", \"fill\", \"groupBy\", \"onClickRow\", \"onMore\", \"onSearch\", \"onSelect\", \"onSort\", \"onUpdate\", \"replace\", \"pad\", \"paginate\", \"pin\", \"placeholder\", \"primaryKey\", \"resizeable\", \"rowProps\", \"select\", \"show\", \"size\", \"sort\", \"sortable\", \"rowDetails\", \"step\", \"verticalAlign\"];\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nimport React, { useCallback, useContext, useEffect, useMemo, useRef, useState, Fragment } from 'react';\nimport { ThemeContext } from 'styled-components';\nimport { defaultProps } from '../../default-props';\nimport { useLayoutEffect } from '../../utils/use-isomorphic-layout-effect';\nimport { Box } from '../Box';\nimport { Text } from '../Text';\nimport { Header } from './Header';\nimport { Footer } from './Footer';\nimport { Body } from './Body';\nimport { GroupedBody } from './GroupedBody';\nimport { Pagination } from '../Pagination';\nimport { buildFooterValues, buildGroups, buildGroupState, filterAndSortData, initializeFilters, normalizeCellProps, normalizePrimaryProperty } from './buildState';\nimport { normalizeShow, usePagination } from '../../utils';\nimport { StyledContainer, StyledDataTable, StyledPlaceholder } from './StyledDataTable';\nimport { DataTablePropTypes } from './propTypes';\nimport { PlaceholderBody } from './PlaceholderBody';\nfunction useGroupState(groups, groupBy) {\n  var _useState = useState(function () {\n      return buildGroupState(groups, groupBy);\n    }),\n    groupState = _useState[0],\n    setGroupState = _useState[1];\n  var _useState2 = useState({\n      groups: groups,\n      groupBy: groupBy\n    }),\n    prevDeps = _useState2[0],\n    setPrevDeps = _useState2[1];\n  var prevGroups = prevDeps.groups,\n    prevGroupBy = prevDeps.groupBy;\n  if (groups !== prevGroups || groupBy !== prevGroupBy) {\n    setPrevDeps({\n      groups: groups,\n      groupBy: groupBy\n    });\n    var nextGroupState = buildGroupState(groups, groupBy);\n    setGroupState(nextGroupState);\n    return [nextGroupState, setGroupState];\n  }\n  return [groupState, setGroupState];\n}\nvar DataTable = function DataTable(_ref) {\n  var background = _ref.background,\n    border = _ref.border,\n    _ref$columns = _ref.columns,\n    columns = _ref$columns === void 0 ? [] : _ref$columns,\n    _ref$data = _ref.data,\n    data = _ref$data === void 0 ? [] : _ref$data,\n    disabled = _ref.disabled,\n    fill = _ref.fill,\n    groupBy = _ref.groupBy,\n    onClickRow = _ref.onClickRow,\n    onMore = _ref.onMore,\n    onSearch = _ref.onSearch,\n    onSelect = _ref.onSelect,\n    onSortProp = _ref.onSort,\n    onUpdate = _ref.onUpdate,\n    replace = _ref.replace,\n    pad = _ref.pad,\n    paginate = _ref.paginate,\n    pin = _ref.pin,\n    placeholder = _ref.placeholder,\n    primaryKey = _ref.primaryKey,\n    resizeable = _ref.resizeable,\n    rowProps = _ref.rowProps,\n    select = _ref.select,\n    showProp = _ref.show,\n    size = _ref.size,\n    sortProp = _ref.sort,\n    sortable = _ref.sortable,\n    rowDetails = _ref.rowDetails,\n    _ref$step = _ref.step,\n    step = _ref$step === void 0 ? 50 : _ref$step,\n    verticalAlign = _ref.verticalAlign,\n    rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n\n  // property name of the primary property\n  var primaryProperty = useMemo(function () {\n    return normalizePrimaryProperty(columns, primaryKey);\n  }, [columns, primaryKey]);\n\n  // whether or not we should show a footer\n  var showFooter = useMemo(function () {\n    return columns.filter(function (c) {\n      return c.footer;\n    }).length > 0;\n  }, [columns]);\n\n  // what column we are actively capturing filter input on\n  var _useState3 = useState(),\n    filtering = _useState3[0],\n    setFiltering = _useState3[1];\n\n  // the currently active filters\n  var _useState4 = useState(initializeFilters(columns)),\n    filters = _useState4[0],\n    setFilters = _useState4[1];\n\n  // which column we are sorting on, with direction\n  var _useState5 = useState(sortProp || {}),\n    sort = _useState5[0],\n    setSort = _useState5[1];\n  useEffect(function () {\n    if (sortProp) setSort(sortProp);\n  }, [sortProp]);\n\n  // the data filtered and sorted, if needed\n  // Note: onUpdate mode expects the data to be passed\n  //   in completely filtered and sorted already.\n  var adjustedData = useMemo(function () {\n    return onUpdate ? data : filterAndSortData(data, filters, onSearch, sort);\n  }, [data, filters, onSearch, onUpdate, sort]);\n\n  // the values to put in the footer cells\n  var footerValues = useMemo(function () {\n    return buildFooterValues(columns, adjustedData);\n  }, [adjustedData, columns]);\n\n  // cell styling properties: background, border, pad\n  var cellProps = useMemo(function () {\n    return normalizeCellProps({\n      background: background,\n      border: border,\n      pad: pad,\n      pin: pin\n    }, theme);\n  }, [background, border, pad, pin, theme]);\n\n  // if groupBy, an array with one item per unique groupBy key value\n  var groups = useMemo(function () {\n    return buildGroups(columns, adjustedData, groupBy, primaryProperty);\n  }, [adjustedData, columns, groupBy, primaryProperty]);\n\n  // an object indicating which group values are expanded\n  var _useGroupState = useGroupState(groups, groupBy),\n    groupState = _useGroupState[0],\n    setGroupState = _useGroupState[1];\n  var _useState6 = useState(step),\n    limit = _useState6[0],\n    setLimit = _useState6[1];\n  var _useState7 = useState(select || onSelect && [] || undefined),\n    selected = _useState7[0],\n    setSelected = _useState7[1];\n  useEffect(function () {\n    return setSelected(select || onSelect && [] || undefined);\n  }, [onSelect, select]);\n  var _useState8 = useState([]),\n    rowExpand = _useState8[0],\n    setRowExpand = _useState8[1];\n\n  // any customized column widths\n  var _useState9 = useState({}),\n    widths = _useState9[0],\n    setWidths = _useState9[1];\n\n  // placeholder placement stuff\n  var headerRef = useRef();\n  var bodyRef = useRef();\n  var footerRef = useRef();\n  var _useState10 = useState(),\n    headerHeight = _useState10[0],\n    setHeaderHeight = _useState10[1];\n  var _useState11 = useState(),\n    footerHeight = _useState11[0],\n    setFooterHeight = _useState11[1];\n\n  // offset compensation when body overflows\n  var _useState12 = useState(0),\n    scrollOffset = _useState12[0],\n    setScrollOffset = _useState12[1];\n\n  // multiple pinned columns offset\n  var _useState13 = useState(),\n    pinnedOffset = _useState13[0],\n    setPinnedOffset = _useState13[1];\n  var onHeaderWidths = useCallback(function (columnWidths) {\n    var hasSelectColumn = Boolean(select || onSelect);\n    var pinnedProperties = columns.map(function (pinnedColumn) {\n      return pinnedColumn.pin && pinnedColumn.property;\n    }).filter(function (n) {\n      return n;\n    });\n    if (hasSelectColumn && pinnedProperties.length > 0) {\n      pinnedProperties = ['_grommetDataTableSelect'].concat(pinnedProperties);\n    }\n    var nextPinnedOffset = {};\n    if (columnWidths !== []) {\n      pinnedProperties.forEach(function (property, index) {\n        var columnIndex = property === '_grommetDataTableSelect' ? 0 : columns.findIndex(function (column) {\n          return column.property === property;\n        }) + hasSelectColumn;\n        if (columnWidths[columnIndex]) {\n          nextPinnedOffset[property] = {\n            width: columnWidths[columnIndex],\n            left: index === 0 ? 0 : nextPinnedOffset[pinnedProperties[index - 1]].left + nextPinnedOffset[pinnedProperties[index - 1]].width\n          };\n        }\n      });\n      setPinnedOffset(nextPinnedOffset);\n    }\n  }, [columns, setPinnedOffset, select, onSelect]);\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useLayoutEffect(function () {\n    var _bodyRef$current$pare;\n    var nextScrollOffset = (((_bodyRef$current$pare = bodyRef.current.parentElement) == null ? void 0 : _bodyRef$current$pare.clientWidth) || 0) - bodyRef.current.clientWidth;\n    if (nextScrollOffset !== scrollOffset) setScrollOffset(nextScrollOffset);\n  });\n  useLayoutEffect(function () {\n    if (placeholder) {\n      if (headerRef.current) {\n        var nextHeaderHeight = headerRef.current.getBoundingClientRect().height;\n        setHeaderHeight(nextHeaderHeight);\n      } else setHeaderHeight(0);\n      if (footerRef.current) {\n        var nextFooterHeight = footerRef.current.getBoundingClientRect().height;\n        setFooterHeight(nextFooterHeight);\n      } else setFooterHeight(0);\n    }\n  }, [footerRef, headerRef, placeholder]);\n\n  // remember that we are filtering on this property\n  var onFiltering = function onFiltering(property) {\n    return setFiltering(property);\n  };\n\n  // remember the search text we should filter this property by\n  var onFilter = function onFilter(property, value) {\n    var nextFilters = _extends({}, filters);\n    nextFilters[property] = value;\n    setFilters(nextFilters);\n    // Let caller know about search, if interested\n    if (onSearch) onSearch(nextFilters);\n  };\n\n  // toggle the sort direction on this property\n  var onSort = function onSort(property) {\n    return function () {\n      var external = sort ? sort.external : false;\n      var direction;\n      if (!sort || property !== sort.property) direction = 'asc';else if (sort.direction === 'asc') direction = 'desc';else direction = 'asc';\n      var nextSort = {\n        property: property,\n        direction: direction,\n        external: external\n      };\n      setSort(nextSort);\n      if (onUpdate) {\n        var opts = {\n          count: limit,\n          sort: nextSort\n        };\n        if (groups) {\n          opts.expanded = Object.keys(groupState).filter(function (k) {\n            return groupState[k].expanded;\n          });\n        }\n        if (showProp) opts.show = showProp;\n        onUpdate(opts);\n      }\n      if (onSortProp) onSortProp(nextSort);\n    };\n  };\n\n  // toggle whether the group is expanded\n  var onToggleGroup = function onToggleGroup(groupValue) {\n    return function () {\n      var nextGroupState = _extends({}, groupState);\n      nextGroupState[groupValue] = _extends({}, nextGroupState[groupValue], {\n        expanded: !nextGroupState[groupValue].expanded\n      });\n      setGroupState(nextGroupState);\n      var expandedKeys = Object.keys(nextGroupState).filter(function (k) {\n        return nextGroupState[k].expanded;\n      });\n      if (onUpdate) {\n        var opts = {\n          expanded: expandedKeys,\n          count: limit\n        };\n        if (sort != null && sort.property) opts.sort = sort;\n        if (showProp) opts.show = showProp;\n        onUpdate(opts);\n      }\n      if (groupBy.onExpand) {\n        groupBy.onExpand(expandedKeys);\n      }\n    };\n  };\n\n  // toggle whether all groups are expanded\n  var onToggleGroups = function onToggleGroups() {\n    var expanded = Object.keys(groupState).filter(function (k) {\n      return !groupState[k].expanded;\n    }).length === 0;\n    var nextGroupState = {};\n    Object.keys(groupState).forEach(function (k) {\n      nextGroupState[k] = _extends({}, groupState[k], {\n        expanded: !expanded\n      });\n    });\n    setGroupState(nextGroupState);\n    var expandedKeys = Object.keys(nextGroupState).filter(function (k) {\n      return nextGroupState[k].expanded;\n    });\n    if (onUpdate) {\n      var opts = {\n        expanded: expandedKeys,\n        count: limit\n      };\n      if (showProp) opts.show = showProp;\n      if (sort != null && sort.property) opts.sort = sort;\n      onUpdate(opts);\n    }\n    if (groupBy.onExpand) {\n      groupBy.onExpand(expandedKeys);\n    }\n  };\n\n  // remember the width this property's column should be\n  var onResize = useCallback(function (property, width) {\n    if (widths[property] !== width) {\n      var nextWidths = _extends({}, widths);\n      nextWidths[property] = width;\n      setWidths(nextWidths);\n    }\n  }, [widths]);\n  if (size && resizeable) {\n    console.warn('DataTable cannot combine \"size\" and \"resizeble\".');\n  }\n  if (onUpdate && onMore) {\n    console.warn('DataTable cannot combine \"onUpdate\" and \"onMore\".');\n  }\n  var _usePagination = usePagination(_extends({\n      data: adjustedData,\n      page: normalizeShow(showProp, step),\n      step: step\n    }, paginate)),\n    items = _usePagination[0],\n    paginationProps = _usePagination[1];\n  var paginationStep = paginationProps.step;\n  var Container = paginate ? StyledContainer : Fragment;\n  var containterProps = paginate ? _extends({}, theme.dataTable.container, {\n    fill: fill\n  }) : undefined;\n\n  // DataTable should overflow if paginating but pagination component\n  // should remain in its location\n  var OverflowContainer = paginate ? Box : Fragment;\n  var overflowContainerProps = paginate ? {\n    overflow: {\n      horizontal: 'auto'\n    }\n  } : undefined;\n\n  // necessary for Firefox, otherwise paginated DataTable will\n  // not fill its container like it does by default on other\n  // browsers like Chrome/Safari\n  var paginatedDataTableProps = paginate && (fill === true || fill === 'horizontal') ? {\n    style: {\n      minWidth: '100%'\n    }\n  } : undefined;\n  var placeholderContent = placeholder;\n  if (placeholder && typeof placeholder === 'string') {\n    placeholderContent = /*#__PURE__*/React.createElement(Box, {\n      background: {\n        color: 'background-front',\n        opacity: 'strong'\n      },\n      align: \"center\",\n      justify: \"center\",\n      fill: \"vertical\"\n    }, /*#__PURE__*/React.createElement(Text, null, placeholder));\n  }\n  var bodyContent = groups ? /*#__PURE__*/React.createElement(GroupedBody, {\n    ref: bodyRef,\n    cellProps: cellProps.body,\n    columns: columns,\n    disabled: disabled,\n    groupBy: typeof groupBy === 'string' ? {\n      property: groupBy\n    } : groupBy,\n    groups: groups,\n    groupState: groupState,\n    pinnedOffset: pinnedOffset,\n    primaryProperty: primaryProperty,\n    onMore: onUpdate ? function () {\n      if (adjustedData.length === limit) {\n        var opts = {\n          expanded: Object.keys(groupState).filter(function (k) {\n            return groupState[k].expanded;\n          }),\n          count: limit + paginationStep\n        };\n        if (sort != null && sort.property) opts.sort = sort;\n        if (showProp) opts.show = showProp;\n        onUpdate(opts);\n        setLimit(function (prev) {\n          return prev + paginationStep;\n        });\n      }\n    } : onMore,\n    onSelect: onSelect ? function (nextSelected, row) {\n      setSelected(nextSelected);\n      if (onSelect) onSelect(nextSelected, row);\n    } : undefined,\n    onToggle: onToggleGroup,\n    onUpdate: onUpdate,\n    replace: replace,\n    rowProps: rowProps,\n    selected: selected,\n    size: size,\n    step: paginationStep,\n    verticalAlign: typeof verticalAlign === 'string' ? verticalAlign : verticalAlign == null ? void 0 : verticalAlign.body\n  }) : /*#__PURE__*/React.createElement(Body, {\n    ref: bodyRef,\n    cellProps: cellProps.body,\n    columns: columns,\n    data: !paginate ? adjustedData : items,\n    disabled: disabled,\n    onMore: onUpdate ? function () {\n      if (adjustedData.length === limit) {\n        var opts = {\n          count: limit + paginationStep\n        };\n        if (sort != null && sort.property) opts.sort = sort;\n        if (showProp) opts.show = showProp;\n        onUpdate(opts);\n        setLimit(function (prev) {\n          return prev + paginationStep;\n        });\n      }\n    } : onMore,\n    replace: replace,\n    onClickRow: onClickRow,\n    onSelect: onSelect ? function (nextSelected, row) {\n      setSelected(nextSelected);\n      if (onSelect) onSelect(nextSelected, row);\n    } : undefined,\n    pinnedCellProps: cellProps.pinned,\n    pinnedOffset: pinnedOffset,\n    primaryProperty: primaryProperty,\n    rowProps: rowProps,\n    selected: selected,\n    show: !paginate ? showProp : undefined,\n    size: size,\n    step: paginationStep,\n    rowDetails: rowDetails,\n    rowExpand: rowExpand,\n    setRowExpand: setRowExpand,\n    verticalAlign: typeof verticalAlign === 'string' ? verticalAlign : verticalAlign == null ? void 0 : verticalAlign.body\n  });\n  return /*#__PURE__*/React.createElement(Container, containterProps, /*#__PURE__*/React.createElement(OverflowContainer, overflowContainerProps, /*#__PURE__*/React.createElement(StyledDataTable, _extends({\n    fillProp: !paginate ? fill : undefined\n  }, paginatedDataTableProps, rest), /*#__PURE__*/React.createElement(Header, {\n    ref: headerRef,\n    cellProps: cellProps.header,\n    columns: columns,\n    data: adjustedData,\n    disabled: disabled,\n    fill: fill,\n    filtering: filtering,\n    filters: filters,\n    groupBy: groupBy,\n    groups: groups,\n    groupState: groupState,\n    pin: pin === true || pin === 'header',\n    pinnedOffset: pinnedOffset,\n    selected: selected,\n    size: size,\n    sort: sort,\n    widths: widths,\n    onFiltering: onFiltering,\n    onFilter: onFilter,\n    onResize: resizeable ? onResize : undefined,\n    onSelect: onSelect ? function (nextSelected) {\n      setSelected(nextSelected);\n      if (onSelect) onSelect(nextSelected);\n    } : undefined,\n    onSort: sortable || sortProp || onSortProp ? onSort : undefined,\n    onToggle: onToggleGroups,\n    onWidths: onHeaderWidths,\n    primaryProperty: primaryProperty,\n    scrollOffset: scrollOffset,\n    rowDetails: rowDetails,\n    verticalAlign: typeof verticalAlign === 'string' ? verticalAlign : verticalAlign == null ? void 0 : verticalAlign.header\n  }), placeholder && (!items || items.length === 0) ? /*#__PURE__*/React.createElement(PlaceholderBody, {\n    ref: bodyRef,\n    columns: columns,\n    onSelect: onSelect\n  }, placeholderContent) : bodyContent, showFooter && /*#__PURE__*/React.createElement(Footer, {\n    ref: footerRef,\n    cellProps: cellProps.footer,\n    columns: columns,\n    fill: fill,\n    footerValues: footerValues,\n    groups: groups,\n    onSelect: onSelect,\n    pin: pin === true || pin === 'footer',\n    pinnedOffset: pinnedOffset,\n    primaryProperty: primaryProperty,\n    scrollOffset: scrollOffset,\n    selected: selected,\n    size: size,\n    verticalAlign: typeof verticalAlign === 'string' ? verticalAlign : verticalAlign == null ? void 0 : verticalAlign.footer\n  }), placeholder && items && items.length > 0 && /*#__PURE__*/React.createElement(StyledPlaceholder, {\n    top: headerHeight,\n    bottom: footerHeight\n  }, placeholderContent))), paginate && adjustedData.length > paginationStep && items && items.length ? /*#__PURE__*/React.createElement(Pagination, _extends({\n    alignSelf: \"end\"\n  }, paginationProps)) : null);\n};\nDataTable.propTypes = DataTablePropTypes;\nexport { DataTable };","map":{"version":3,"names":["_excluded","_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","React","useCallback","useContext","useEffect","useMemo","useRef","useState","Fragment","ThemeContext","defaultProps","useLayoutEffect","Box","Text","Header","Footer","Body","GroupedBody","Pagination","buildFooterValues","buildGroups","buildGroupState","filterAndSortData","initializeFilters","normalizeCellProps","normalizePrimaryProperty","normalizeShow","usePagination","StyledContainer","StyledDataTable","StyledPlaceholder","DataTablePropTypes","PlaceholderBody","useGroupState","groups","groupBy","_useState","groupState","setGroupState","_useState2","prevDeps","setPrevDeps","prevGroups","prevGroupBy","nextGroupState","DataTable","_ref","background","border","_ref$columns","columns","_ref$data","data","disabled","fill","onClickRow","onMore","onSearch","onSelect","onSortProp","onSort","onUpdate","replace","pad","paginate","pin","placeholder","primaryKey","resizeable","rowProps","select","showProp","show","size","sortProp","sort","sortable","rowDetails","_ref$step","step","verticalAlign","rest","theme","primaryProperty","showFooter","filter","c","footer","_useState3","filtering","setFiltering","_useState4","filters","setFilters","_useState5","setSort","adjustedData","footerValues","cellProps","_useGroupState","_useState6","limit","setLimit","_useState7","undefined","selected","setSelected","_useState8","rowExpand","setRowExpand","_useState9","widths","setWidths","headerRef","bodyRef","footerRef","_useState10","headerHeight","setHeaderHeight","_useState11","footerHeight","setFooterHeight","_useState12","scrollOffset","setScrollOffset","_useState13","pinnedOffset","setPinnedOffset","onHeaderWidths","columnWidths","hasSelectColumn","Boolean","pinnedProperties","map","pinnedColumn","property","n","concat","nextPinnedOffset","forEach","index","columnIndex","findIndex","column","width","left","_bodyRef$current$pare","nextScrollOffset","current","parentElement","clientWidth","nextHeaderHeight","getBoundingClientRect","height","nextFooterHeight","onFiltering","onFilter","value","nextFilters","external","direction","nextSort","opts","count","expanded","k","onToggleGroup","groupValue","expandedKeys","onExpand","onToggleGroups","onResize","nextWidths","console","warn","_usePagination","page","items","paginationProps","paginationStep","Container","containterProps","dataTable","container","OverflowContainer","overflowContainerProps","overflow","horizontal","paginatedDataTableProps","style","minWidth","placeholderContent","createElement","color","opacity","align","justify","bodyContent","ref","body","prev","nextSelected","row","onToggle","pinnedCellProps","pinned","fillProp","header","onWidths","top","bottom","alignSelf","propTypes"],"sources":["C:/Users/archi/OneDrive/Documents/Uni/Udemy React Course/first-react-app/node_modules/grommet/es6/components/DataTable/DataTable.js"],"sourcesContent":["var _excluded = [\"background\", \"border\", \"columns\", \"data\", \"disabled\", \"fill\", \"groupBy\", \"onClickRow\", \"onMore\", \"onSearch\", \"onSelect\", \"onSort\", \"onUpdate\", \"replace\", \"pad\", \"paginate\", \"pin\", \"placeholder\", \"primaryKey\", \"resizeable\", \"rowProps\", \"select\", \"show\", \"size\", \"sort\", \"sortable\", \"rowDetails\", \"step\", \"verticalAlign\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport React, { useCallback, useContext, useEffect, useMemo, useRef, useState, Fragment } from 'react';\nimport { ThemeContext } from 'styled-components';\nimport { defaultProps } from '../../default-props';\nimport { useLayoutEffect } from '../../utils/use-isomorphic-layout-effect';\nimport { Box } from '../Box';\nimport { Text } from '../Text';\nimport { Header } from './Header';\nimport { Footer } from './Footer';\nimport { Body } from './Body';\nimport { GroupedBody } from './GroupedBody';\nimport { Pagination } from '../Pagination';\nimport { buildFooterValues, buildGroups, buildGroupState, filterAndSortData, initializeFilters, normalizeCellProps, normalizePrimaryProperty } from './buildState';\nimport { normalizeShow, usePagination } from '../../utils';\nimport { StyledContainer, StyledDataTable, StyledPlaceholder } from './StyledDataTable';\nimport { DataTablePropTypes } from './propTypes';\nimport { PlaceholderBody } from './PlaceholderBody';\nfunction useGroupState(groups, groupBy) {\n  var _useState = useState(function () {\n      return buildGroupState(groups, groupBy);\n    }),\n    groupState = _useState[0],\n    setGroupState = _useState[1];\n  var _useState2 = useState({\n      groups: groups,\n      groupBy: groupBy\n    }),\n    prevDeps = _useState2[0],\n    setPrevDeps = _useState2[1];\n  var prevGroups = prevDeps.groups,\n    prevGroupBy = prevDeps.groupBy;\n  if (groups !== prevGroups || groupBy !== prevGroupBy) {\n    setPrevDeps({\n      groups: groups,\n      groupBy: groupBy\n    });\n    var nextGroupState = buildGroupState(groups, groupBy);\n    setGroupState(nextGroupState);\n    return [nextGroupState, setGroupState];\n  }\n  return [groupState, setGroupState];\n}\nvar DataTable = function DataTable(_ref) {\n  var background = _ref.background,\n    border = _ref.border,\n    _ref$columns = _ref.columns,\n    columns = _ref$columns === void 0 ? [] : _ref$columns,\n    _ref$data = _ref.data,\n    data = _ref$data === void 0 ? [] : _ref$data,\n    disabled = _ref.disabled,\n    fill = _ref.fill,\n    groupBy = _ref.groupBy,\n    onClickRow = _ref.onClickRow,\n    onMore = _ref.onMore,\n    onSearch = _ref.onSearch,\n    onSelect = _ref.onSelect,\n    onSortProp = _ref.onSort,\n    onUpdate = _ref.onUpdate,\n    replace = _ref.replace,\n    pad = _ref.pad,\n    paginate = _ref.paginate,\n    pin = _ref.pin,\n    placeholder = _ref.placeholder,\n    primaryKey = _ref.primaryKey,\n    resizeable = _ref.resizeable,\n    rowProps = _ref.rowProps,\n    select = _ref.select,\n    showProp = _ref.show,\n    size = _ref.size,\n    sortProp = _ref.sort,\n    sortable = _ref.sortable,\n    rowDetails = _ref.rowDetails,\n    _ref$step = _ref.step,\n    step = _ref$step === void 0 ? 50 : _ref$step,\n    verticalAlign = _ref.verticalAlign,\n    rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n\n  // property name of the primary property\n  var primaryProperty = useMemo(function () {\n    return normalizePrimaryProperty(columns, primaryKey);\n  }, [columns, primaryKey]);\n\n  // whether or not we should show a footer\n  var showFooter = useMemo(function () {\n    return columns.filter(function (c) {\n      return c.footer;\n    }).length > 0;\n  }, [columns]);\n\n  // what column we are actively capturing filter input on\n  var _useState3 = useState(),\n    filtering = _useState3[0],\n    setFiltering = _useState3[1];\n\n  // the currently active filters\n  var _useState4 = useState(initializeFilters(columns)),\n    filters = _useState4[0],\n    setFilters = _useState4[1];\n\n  // which column we are sorting on, with direction\n  var _useState5 = useState(sortProp || {}),\n    sort = _useState5[0],\n    setSort = _useState5[1];\n  useEffect(function () {\n    if (sortProp) setSort(sortProp);\n  }, [sortProp]);\n\n  // the data filtered and sorted, if needed\n  // Note: onUpdate mode expects the data to be passed\n  //   in completely filtered and sorted already.\n  var adjustedData = useMemo(function () {\n    return onUpdate ? data : filterAndSortData(data, filters, onSearch, sort);\n  }, [data, filters, onSearch, onUpdate, sort]);\n\n  // the values to put in the footer cells\n  var footerValues = useMemo(function () {\n    return buildFooterValues(columns, adjustedData);\n  }, [adjustedData, columns]);\n\n  // cell styling properties: background, border, pad\n  var cellProps = useMemo(function () {\n    return normalizeCellProps({\n      background: background,\n      border: border,\n      pad: pad,\n      pin: pin\n    }, theme);\n  }, [background, border, pad, pin, theme]);\n\n  // if groupBy, an array with one item per unique groupBy key value\n  var groups = useMemo(function () {\n    return buildGroups(columns, adjustedData, groupBy, primaryProperty);\n  }, [adjustedData, columns, groupBy, primaryProperty]);\n\n  // an object indicating which group values are expanded\n  var _useGroupState = useGroupState(groups, groupBy),\n    groupState = _useGroupState[0],\n    setGroupState = _useGroupState[1];\n  var _useState6 = useState(step),\n    limit = _useState6[0],\n    setLimit = _useState6[1];\n  var _useState7 = useState(select || onSelect && [] || undefined),\n    selected = _useState7[0],\n    setSelected = _useState7[1];\n  useEffect(function () {\n    return setSelected(select || onSelect && [] || undefined);\n  }, [onSelect, select]);\n  var _useState8 = useState([]),\n    rowExpand = _useState8[0],\n    setRowExpand = _useState8[1];\n\n  // any customized column widths\n  var _useState9 = useState({}),\n    widths = _useState9[0],\n    setWidths = _useState9[1];\n\n  // placeholder placement stuff\n  var headerRef = useRef();\n  var bodyRef = useRef();\n  var footerRef = useRef();\n  var _useState10 = useState(),\n    headerHeight = _useState10[0],\n    setHeaderHeight = _useState10[1];\n  var _useState11 = useState(),\n    footerHeight = _useState11[0],\n    setFooterHeight = _useState11[1];\n\n  // offset compensation when body overflows\n  var _useState12 = useState(0),\n    scrollOffset = _useState12[0],\n    setScrollOffset = _useState12[1];\n\n  // multiple pinned columns offset\n  var _useState13 = useState(),\n    pinnedOffset = _useState13[0],\n    setPinnedOffset = _useState13[1];\n  var onHeaderWidths = useCallback(function (columnWidths) {\n    var hasSelectColumn = Boolean(select || onSelect);\n    var pinnedProperties = columns.map(function (pinnedColumn) {\n      return pinnedColumn.pin && pinnedColumn.property;\n    }).filter(function (n) {\n      return n;\n    });\n    if (hasSelectColumn && pinnedProperties.length > 0) {\n      pinnedProperties = ['_grommetDataTableSelect'].concat(pinnedProperties);\n    }\n    var nextPinnedOffset = {};\n    if (columnWidths !== []) {\n      pinnedProperties.forEach(function (property, index) {\n        var columnIndex = property === '_grommetDataTableSelect' ? 0 : columns.findIndex(function (column) {\n          return column.property === property;\n        }) + hasSelectColumn;\n        if (columnWidths[columnIndex]) {\n          nextPinnedOffset[property] = {\n            width: columnWidths[columnIndex],\n            left: index === 0 ? 0 : nextPinnedOffset[pinnedProperties[index - 1]].left + nextPinnedOffset[pinnedProperties[index - 1]].width\n          };\n        }\n      });\n      setPinnedOffset(nextPinnedOffset);\n    }\n  }, [columns, setPinnedOffset, select, onSelect]);\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useLayoutEffect(function () {\n    var _bodyRef$current$pare;\n    var nextScrollOffset = (((_bodyRef$current$pare = bodyRef.current.parentElement) == null ? void 0 : _bodyRef$current$pare.clientWidth) || 0) - bodyRef.current.clientWidth;\n    if (nextScrollOffset !== scrollOffset) setScrollOffset(nextScrollOffset);\n  });\n  useLayoutEffect(function () {\n    if (placeholder) {\n      if (headerRef.current) {\n        var nextHeaderHeight = headerRef.current.getBoundingClientRect().height;\n        setHeaderHeight(nextHeaderHeight);\n      } else setHeaderHeight(0);\n      if (footerRef.current) {\n        var nextFooterHeight = footerRef.current.getBoundingClientRect().height;\n        setFooterHeight(nextFooterHeight);\n      } else setFooterHeight(0);\n    }\n  }, [footerRef, headerRef, placeholder]);\n\n  // remember that we are filtering on this property\n  var onFiltering = function onFiltering(property) {\n    return setFiltering(property);\n  };\n\n  // remember the search text we should filter this property by\n  var onFilter = function onFilter(property, value) {\n    var nextFilters = _extends({}, filters);\n    nextFilters[property] = value;\n    setFilters(nextFilters);\n    // Let caller know about search, if interested\n    if (onSearch) onSearch(nextFilters);\n  };\n\n  // toggle the sort direction on this property\n  var onSort = function onSort(property) {\n    return function () {\n      var external = sort ? sort.external : false;\n      var direction;\n      if (!sort || property !== sort.property) direction = 'asc';else if (sort.direction === 'asc') direction = 'desc';else direction = 'asc';\n      var nextSort = {\n        property: property,\n        direction: direction,\n        external: external\n      };\n      setSort(nextSort);\n      if (onUpdate) {\n        var opts = {\n          count: limit,\n          sort: nextSort\n        };\n        if (groups) {\n          opts.expanded = Object.keys(groupState).filter(function (k) {\n            return groupState[k].expanded;\n          });\n        }\n        if (showProp) opts.show = showProp;\n        onUpdate(opts);\n      }\n      if (onSortProp) onSortProp(nextSort);\n    };\n  };\n\n  // toggle whether the group is expanded\n  var onToggleGroup = function onToggleGroup(groupValue) {\n    return function () {\n      var nextGroupState = _extends({}, groupState);\n      nextGroupState[groupValue] = _extends({}, nextGroupState[groupValue], {\n        expanded: !nextGroupState[groupValue].expanded\n      });\n      setGroupState(nextGroupState);\n      var expandedKeys = Object.keys(nextGroupState).filter(function (k) {\n        return nextGroupState[k].expanded;\n      });\n      if (onUpdate) {\n        var opts = {\n          expanded: expandedKeys,\n          count: limit\n        };\n        if (sort != null && sort.property) opts.sort = sort;\n        if (showProp) opts.show = showProp;\n        onUpdate(opts);\n      }\n      if (groupBy.onExpand) {\n        groupBy.onExpand(expandedKeys);\n      }\n    };\n  };\n\n  // toggle whether all groups are expanded\n  var onToggleGroups = function onToggleGroups() {\n    var expanded = Object.keys(groupState).filter(function (k) {\n      return !groupState[k].expanded;\n    }).length === 0;\n    var nextGroupState = {};\n    Object.keys(groupState).forEach(function (k) {\n      nextGroupState[k] = _extends({}, groupState[k], {\n        expanded: !expanded\n      });\n    });\n    setGroupState(nextGroupState);\n    var expandedKeys = Object.keys(nextGroupState).filter(function (k) {\n      return nextGroupState[k].expanded;\n    });\n    if (onUpdate) {\n      var opts = {\n        expanded: expandedKeys,\n        count: limit\n      };\n      if (showProp) opts.show = showProp;\n      if (sort != null && sort.property) opts.sort = sort;\n      onUpdate(opts);\n    }\n    if (groupBy.onExpand) {\n      groupBy.onExpand(expandedKeys);\n    }\n  };\n\n  // remember the width this property's column should be\n  var onResize = useCallback(function (property, width) {\n    if (widths[property] !== width) {\n      var nextWidths = _extends({}, widths);\n      nextWidths[property] = width;\n      setWidths(nextWidths);\n    }\n  }, [widths]);\n  if (size && resizeable) {\n    console.warn('DataTable cannot combine \"size\" and \"resizeble\".');\n  }\n  if (onUpdate && onMore) {\n    console.warn('DataTable cannot combine \"onUpdate\" and \"onMore\".');\n  }\n  var _usePagination = usePagination(_extends({\n      data: adjustedData,\n      page: normalizeShow(showProp, step),\n      step: step\n    }, paginate)),\n    items = _usePagination[0],\n    paginationProps = _usePagination[1];\n  var paginationStep = paginationProps.step;\n  var Container = paginate ? StyledContainer : Fragment;\n  var containterProps = paginate ? _extends({}, theme.dataTable.container, {\n    fill: fill\n  }) : undefined;\n\n  // DataTable should overflow if paginating but pagination component\n  // should remain in its location\n  var OverflowContainer = paginate ? Box : Fragment;\n  var overflowContainerProps = paginate ? {\n    overflow: {\n      horizontal: 'auto'\n    }\n  } : undefined;\n\n  // necessary for Firefox, otherwise paginated DataTable will\n  // not fill its container like it does by default on other\n  // browsers like Chrome/Safari\n  var paginatedDataTableProps = paginate && (fill === true || fill === 'horizontal') ? {\n    style: {\n      minWidth: '100%'\n    }\n  } : undefined;\n  var placeholderContent = placeholder;\n  if (placeholder && typeof placeholder === 'string') {\n    placeholderContent = /*#__PURE__*/React.createElement(Box, {\n      background: {\n        color: 'background-front',\n        opacity: 'strong'\n      },\n      align: \"center\",\n      justify: \"center\",\n      fill: \"vertical\"\n    }, /*#__PURE__*/React.createElement(Text, null, placeholder));\n  }\n  var bodyContent = groups ? /*#__PURE__*/React.createElement(GroupedBody, {\n    ref: bodyRef,\n    cellProps: cellProps.body,\n    columns: columns,\n    disabled: disabled,\n    groupBy: typeof groupBy === 'string' ? {\n      property: groupBy\n    } : groupBy,\n    groups: groups,\n    groupState: groupState,\n    pinnedOffset: pinnedOffset,\n    primaryProperty: primaryProperty,\n    onMore: onUpdate ? function () {\n      if (adjustedData.length === limit) {\n        var opts = {\n          expanded: Object.keys(groupState).filter(function (k) {\n            return groupState[k].expanded;\n          }),\n          count: limit + paginationStep\n        };\n        if (sort != null && sort.property) opts.sort = sort;\n        if (showProp) opts.show = showProp;\n        onUpdate(opts);\n        setLimit(function (prev) {\n          return prev + paginationStep;\n        });\n      }\n    } : onMore,\n    onSelect: onSelect ? function (nextSelected, row) {\n      setSelected(nextSelected);\n      if (onSelect) onSelect(nextSelected, row);\n    } : undefined,\n    onToggle: onToggleGroup,\n    onUpdate: onUpdate,\n    replace: replace,\n    rowProps: rowProps,\n    selected: selected,\n    size: size,\n    step: paginationStep,\n    verticalAlign: typeof verticalAlign === 'string' ? verticalAlign : verticalAlign == null ? void 0 : verticalAlign.body\n  }) : /*#__PURE__*/React.createElement(Body, {\n    ref: bodyRef,\n    cellProps: cellProps.body,\n    columns: columns,\n    data: !paginate ? adjustedData : items,\n    disabled: disabled,\n    onMore: onUpdate ? function () {\n      if (adjustedData.length === limit) {\n        var opts = {\n          count: limit + paginationStep\n        };\n        if (sort != null && sort.property) opts.sort = sort;\n        if (showProp) opts.show = showProp;\n        onUpdate(opts);\n        setLimit(function (prev) {\n          return prev + paginationStep;\n        });\n      }\n    } : onMore,\n    replace: replace,\n    onClickRow: onClickRow,\n    onSelect: onSelect ? function (nextSelected, row) {\n      setSelected(nextSelected);\n      if (onSelect) onSelect(nextSelected, row);\n    } : undefined,\n    pinnedCellProps: cellProps.pinned,\n    pinnedOffset: pinnedOffset,\n    primaryProperty: primaryProperty,\n    rowProps: rowProps,\n    selected: selected,\n    show: !paginate ? showProp : undefined,\n    size: size,\n    step: paginationStep,\n    rowDetails: rowDetails,\n    rowExpand: rowExpand,\n    setRowExpand: setRowExpand,\n    verticalAlign: typeof verticalAlign === 'string' ? verticalAlign : verticalAlign == null ? void 0 : verticalAlign.body\n  });\n  return /*#__PURE__*/React.createElement(Container, containterProps, /*#__PURE__*/React.createElement(OverflowContainer, overflowContainerProps, /*#__PURE__*/React.createElement(StyledDataTable, _extends({\n    fillProp: !paginate ? fill : undefined\n  }, paginatedDataTableProps, rest), /*#__PURE__*/React.createElement(Header, {\n    ref: headerRef,\n    cellProps: cellProps.header,\n    columns: columns,\n    data: adjustedData,\n    disabled: disabled,\n    fill: fill,\n    filtering: filtering,\n    filters: filters,\n    groupBy: groupBy,\n    groups: groups,\n    groupState: groupState,\n    pin: pin === true || pin === 'header',\n    pinnedOffset: pinnedOffset,\n    selected: selected,\n    size: size,\n    sort: sort,\n    widths: widths,\n    onFiltering: onFiltering,\n    onFilter: onFilter,\n    onResize: resizeable ? onResize : undefined,\n    onSelect: onSelect ? function (nextSelected) {\n      setSelected(nextSelected);\n      if (onSelect) onSelect(nextSelected);\n    } : undefined,\n    onSort: sortable || sortProp || onSortProp ? onSort : undefined,\n    onToggle: onToggleGroups,\n    onWidths: onHeaderWidths,\n    primaryProperty: primaryProperty,\n    scrollOffset: scrollOffset,\n    rowDetails: rowDetails,\n    verticalAlign: typeof verticalAlign === 'string' ? verticalAlign : verticalAlign == null ? void 0 : verticalAlign.header\n  }), placeholder && (!items || items.length === 0) ? /*#__PURE__*/React.createElement(PlaceholderBody, {\n    ref: bodyRef,\n    columns: columns,\n    onSelect: onSelect\n  }, placeholderContent) : bodyContent, showFooter && /*#__PURE__*/React.createElement(Footer, {\n    ref: footerRef,\n    cellProps: cellProps.footer,\n    columns: columns,\n    fill: fill,\n    footerValues: footerValues,\n    groups: groups,\n    onSelect: onSelect,\n    pin: pin === true || pin === 'footer',\n    pinnedOffset: pinnedOffset,\n    primaryProperty: primaryProperty,\n    scrollOffset: scrollOffset,\n    selected: selected,\n    size: size,\n    verticalAlign: typeof verticalAlign === 'string' ? verticalAlign : verticalAlign == null ? void 0 : verticalAlign.footer\n  }), placeholder && items && items.length > 0 && /*#__PURE__*/React.createElement(StyledPlaceholder, {\n    top: headerHeight,\n    bottom: footerHeight\n  }, placeholderContent))), paginate && adjustedData.length > paginationStep && items && items.length ? /*#__PURE__*/React.createElement(Pagination, _extends({\n    alignSelf: \"end\"\n  }, paginationProps)) : null);\n};\nDataTable.propTypes = DataTablePropTypes;\nexport { DataTable };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}